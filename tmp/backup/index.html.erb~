<style type="text/css" media="all">
  .tr-medications{display:none}
</style>

<script>	

		//Initialize first demo:
		<%# ddaccordion.init({ %>
		<%# 	headerclass: "maintable-js", //Shared CSS class name of headers group %>
		<%# 	contentclass: "subtable-js", //Shared CSS class name of contents group %>
		<%# 	revealtype: "click", //Reveal content when user clicks or onmouseover the header? Valid value: "click", "clickgo", or "mouseover" %>
		<%# 	mouseoverdelay: 200, //if revealtype="mouseover", set delay in milliseconds before header expands onMouseover %>
		<%# 	collapseprev: true, //Collapse previous content (so only one open at any time)? true/false %> 
		<%# 	defaultexpanded: [], //index of content(s) open by default [index1, index2, etc]. [] denotes no content. %>
		<%# 	onemustopen: false, //Specify whether at least one header should be open always (so never all headers closed) %>
		<%# 	animatedefault: false, //Should contents open by default be animated into view? %>
		<%# 	scrolltoheader: false, //scroll to header each time after it's been expanded by the user? %>
		<%# 	persiststate: true, //persist state of opened contents within browser session? %>
		<%# 	toggleclass: ["", "opentd"], //Two CSS classes to be applied to the header when it's collapsed and expanded, respectively ["class1", "class2"] %>
		<%# 	togglehtml: ["none", "", ""], //Additional HTML added to the header when it's collapsed and expanded, respectively  ["position", "html1", "html2"] (see docs) %>
		<%# 	animatespeed: "fast", //speed of animation: integer in milliseconds (ie: 200), or keywords "fast", "normal", or "slow" %>
		<%# 	oninit:function(expandedindices){ //custom code to run when headers have initalized %>
		<%# 		//do nothing %>
		<%# 	}, %>
		<%# 	onopenclose:function(header, index, state, isuseractivated){ //custom code to run whenever a header is opened or closed %>
		<%# 		//do nothing %>
		<%# 	} %>
		<%# }); %>


		$(".tip-taken").tooltip({ offset: [-126, -118]});

		$(document).delegate(".prev_month", "click", function() {
			var time = $(this).data('time');
			path = $(this).attr('path');
			// path = "/api/consumer_compliances/prev_month"
			load(path, time)
	        return false;
		});

		$(document).delegate(".next_month", "click", function() {
			var time = $(this).data('time');
			path = $(this).attr('path');
			// path = "/api/consumer_compliances/next_month"
			load(path, time)
	        return false;
		});

		function load(path, time){
			// alert(path);
			// alert(time);

			 $.ajax({
	            async : true,
	            type : 'post',
	            url : path,
	            data: {"time" : time},

	            beforeSend:  function(){
	            	// $('#modal_div').modal();
	            	blockUI();
	            },
	            success : function(data) {
	                $('#compliance_container').html(data);
	            },
	            error : function(data) {
	            	$('#compliance_container').html("<h1 style='color:red;'> Unable to load </h1>");	
	            },
	            complete : function(){
	            	// $.modal.close();
	            	$.unblockUI();
	            }
	        });
		}

	</script>	
		<div class="mainbg pos-rel">
			<span class="shadow"></span>
			<div class="main pd10-TB">
				<div class="box-typ1 pd20 pos-rel">

					<div id="compliance_container" class="">						
					<%= render :partial => 'compliance_table' %>
					</div>				
					<div class="pagination">
						<table class="width100 table">
							<tr>
								<td class="width33">&nbsp;</td>
								<td class="text-center">
									<%= (page_entries_info @consumers).titleize.html_safe %>
								</td>
								<td class="width33 text-right">
									<%= paginate @consumers %>

								</td>
							</tr>
						</table>
					</div>

				</div>
			</div>
		</div>

		<div id="modal_div" style="display:none; width: auto;" >
			<%= image_tag "loading.gif", :alt => "", :width => "100", :height => "100" %>
		</div>


	<!-- script ends -->

    <script type="text/javascript" charset="utf-8">
      $(".tbl-typ1").delegate("click", function(e){
          if($(e.target).hasClass('ico-arrow')){
            $(e.target).parents('tr').next().toggle();
            $(e.target).parent().toggleClass('opentd');
            return false;
          }
          return false;
       })
    </script>
